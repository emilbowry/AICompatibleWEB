{"version":3,"file":"696.bundle.js","mappings":"sMAuBMA,EAASA,KAAMC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAAE,MACjBC,EAAiB,EACtBH,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KACPC,EAAAA,EAAAA,KAACD,EAAM,KASFK,EAAuC,CAC5CC,OAAQ,QAAFC,OAAU,IAAG,MACnBC,YAAa,KA8CRC,EAAsCC,IAA0B,IAAzB,UAAEC,EAAS,MAAEC,GAAOF,GACzDG,EAAUC,IAAeC,EAAAA,EAAAA,WAAS,IACnC,SAAEC,IAAaC,EAAAA,EAAAA,YAAWC,GAC1BC,EACL,EACAC,KAAKC,KACJD,KAAKE,KAAKC,KA5EJ,IAgFFC,EAAsBJ,KAAKK,GAAKN,EAEhCO,EAAcN,KAAKO,MADL,IACgD,EAAtBH,IAA4B,EAGpEI,EAAgBT,GAASP,EAAQI,EACjCa,EAAUD,GAAiB,EAAIR,KAAKK,GAAKC,GACzCI,EACmC,IAAxCV,KAAKO,MAAME,GAAW,EAAIT,KAAKK,KAAaL,KAAKW,IAAIF,IAAY,EAAI,EAEhEG,EAAa,EAAIZ,KAAKW,IAAIH,GADjBL,GAGTU,EAlEc,SACpBC,EACAF,EACAnB,GAAiB,IACjBsB,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAC,MACe,CAC1BG,SAAU,WAEVjC,OAAQ,GAAFC,OApCM,GAoCgB,MAC5BiC,MAAO,GAAFjC,OApCM,GAoCe,MAC1BkC,QAAS,OACTP,UAAW,GAAF3B,OAAK2B,EAAYX,EAAqB,MAG/CS,WAAY,QAAFzB,OAAUyB,EAAaT,GAAoB,OAErDmB,UAAW,SACXC,eAAgB,SAChBC,WAAY,SAEZC,gBAAiB,MACjBV,QAASA,EACTW,MAAO,UACP,CA2CcC,CAHCxB,IAEI,EAAI,EAAIH,KAAK4B,IAAIpB,IACEI,EAAYnB,EAAUiB,GAE5D,OACC7B,EAAAA,EAAAA,KAAA,OACCgC,MAAOA,EACPgB,QAASA,IAAMnC,GAAaD,GAAUV,SAErCQ,KAIEO,GAAqBgC,EAAAA,EAAAA,eAAc,CACxClC,SAAU,EACVmC,YAAa,IAgCRC,EAA6CC,IAAe,IAAd,MAAEC,GAAOD,EAGtDF,EAAcG,EAAMjB,QACpB,SAAErB,EAAQ,IAAEuC,GAjCSC,MAC3B,IAAOxC,EAAUyC,IAAe1C,EAAAA,EAAAA,UAAS,IAAM,GACzCwC,GAAMG,EAAAA,EAAAA,QAAuB,MAyBnC,OAvBAC,EAAAA,EAAAA,WAAU,KACT,IAAMC,EAAUL,EAAIM,QACpB,GAAKD,EAAL,CAEA,IAAME,EAAeC,IAEpBA,EAAEC,iBACF,IAAMC,EAAcC,OAAOD,YACrBE,EAAUJ,EAAEK,OACZC,EAAmBJ,EAAc,EAAI,EAErCK,EAAclD,KAAKmD,KAAKJ,EAAUE,GAExCZ,EAAae,GAASA,EAAOF,IAK9B,OAFAV,EAAQa,iBAAiB,QAASX,EAAa,CAAEY,SAAS,IAEnD,KACNd,EAAQe,oBAAoB,QAASb,GAjBlB,GAmBlB,IAEI,CAAE9C,WAAUuC,QAMOC,GAE1B,OACCvD,EAAAA,EAAAA,KAACiB,EAAkB,CAClB0D,MAAO,CACN5D,WACAmC,eACChD,UAEFF,EAAAA,EAAAA,KAAA,OACCgC,MAAO5B,EACPwE,UAAU,SAAQ1E,UAElB2E,EAAAA,EAAAA,MAAA,OACC7C,MA3IqB,CACzBM,SAAU,QACVC,MAAO,OACPlC,OAAQ,QAyIJiD,IAAKA,EAAIpD,SAAA,CAERmD,EAAMyB,IAAI,CAACC,EAAMC,KAEhBhF,EAAAA,EAAAA,KAACQ,EAAS,CAETE,UAAWqE,EACXpE,MAAOqE,GAFFA,KAORhF,EAAAA,EAAAA,KAAA,OAAKgC,MArHiB,CAC1BM,SAAU,WACV2C,KAAM,EACN1C,MAAO,OACPlC,OAAQ,MAER6B,QAAS,GACTgD,cAAe,kBAoHVC,EAAkBA,KAAMnF,EAAAA,EAAAA,KAACmD,EAAc,CAACE,MAAOlD,IAcrD,QAZsBiF,KAEpBpF,EAAAA,EAAAA,KAAA,OACCgC,MAAO,CACN3B,OAAQ,QAAFC,OAAUgB,GAAiC,OACjDiB,MAAO,QAAFjC,OAAUgB,GAAwC,QACtDpB,UAEFF,EAAAA,EAAAA,KAACmD,EAAc,CAACE,MAAOlD,K","sources":["webpack://simpleapp/./src/pages/demo/DemoPage.tsx"],"sourcesContent":["// client/src/pages/demo/DemoPage.tsx\n\n// client/src/pages/demo/DemoPage.tsx\n\nimport React, {\n\tcreateContext,\n\tuseContext,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from \"react\";\n// import { DocumentAnalysisViewer } from \"../dpo-tool/css_dual\";\nimport { DocumentAnalysisViewer } from \"../dpo-tool/CSS_Markdown/CSSMarkdown\";\nimport { ExperimentScene } from \"./DemoCube\";\n\n// import { DocumentAnalysisViewer } from \"../dpo-tool/dual\";\nconst CONFIG = {\n\titemHeight: 10,\n\titemWidth: 20,\n\tradius: 60,\n\tcontainerHeightRatio: 1,\n};\n\nconst TestFC = () => <>T</>;\nconst DemoComponents = [\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n\t<TestFC />,\n];\n\nconst getContainerStyle = (): React.CSSProperties => ({\n\tposition: \"fixed\",\n\twidth: \"100%\",\n\theight: \"100%\",\n});\n\nconst container_style: React.CSSProperties = {\n\theight: `calc(${100}%)`,\n\taspectRatio: \"1\",\n};\nconst getItemStyle = (\n\tmarginTop: number,\n\tmarginLeft: number,\n\tisActive: boolean,\n\topacity = 1\n): React.CSSProperties => ({\n\tposition: \"absolute\",\n\n\theight: `${CONFIG.itemHeight}vh`,\n\twidth: `${CONFIG.itemWidth}vh`,\n\tdisplay: \"flex\",\n\tmarginTop: `${marginTop - CONFIG.itemHeight / 2}vh`,\n\t// transform: `translateY(${marginTop - CONFIG.itemHeight / 2}%)`, // doesnt work since its now wrt to item height\n\t// marginBottom: `${-CONFIG.itemHeight / 2}%`,\n\tmarginLeft: `calc(${marginLeft - CONFIG.itemWidth / 2}vh)`,\n\n\ttextAlign: \"center\",\n\tjustifyContent: \"center\",\n\talignItems: \"center\",\n\t// backgroundColor: `rgb(${color_index % 255},0,0)`,\n\tbackgroundColor: \"red\",\n\topacity: opacity,\n\tcolor: \"#ffffff\",\n});\n\nconst getHelperLineStyle = (): React.CSSProperties => ({\n\tposition: \"absolute\",\n\tleft: 0,\n\twidth: \"100%\",\n\theight: \"1px\",\n\t// background: \"red\",\n\topacity: 0.3,\n\tpointerEvents: \"none\",\n});\n\ninterface WheelItemProps {\n\tComponent: React.ReactNode;\n\tindex: number;\n}\n\ninterface ScrollWheelProps {\n\titems: React.ReactNode[];\n}\n\nconst WheelItem: React.FC<WheelItemProps> = ({ Component, index }) => {\n\tconst [isActive, setIsActive] = useState(false);\n\tconst { rotation } = useContext(ScrollWheelContext);\n\tconst theta =\n\t\t2 *\n\t\tMath.asin(\n\t\t\tMath.sqrt(CONFIG.itemHeight ** 2 + CONFIG.itemWidth ** 2) /\n\t\t\t\tCONFIG.radius\n\t\t);\n\t// testing minimal distance\n\tconst items_per_half_turn = Math.PI / theta;\n\tconst total_items = 31;\n\tconst total_turns = Math.floor(total_items / (items_per_half_turn * 2)) + 1;\n\t// const theta = Math.PI / items_per_half_turn;\n\n\tconst current_angle = theta * -index + rotation;\n\tconst z_score = current_angle % (2 * Math.PI * total_turns);\n\tconst opacity_score =\n\t\tMath.floor(z_score / (2 * Math.PI)) === 0 ? Math.sin(z_score) ** 2 : 0;\n\tconst factor = CONFIG.radius / 2;\n\tconst marginLeft = 1 * Math.sin(current_angle) * factor; // ASSUME SQUARE FOR NOW\n\tconst marginTop = (1 - 1 * Math.cos(current_angle)) * factor;\n\tconst style = getItemStyle(marginTop, marginLeft, isActive, opacity_score);\n\n\treturn (\n\t\t<div\n\t\t\tstyle={style}\n\t\t\tonClick={() => setIsActive(!isActive)}\n\t\t>\n\t\t\t{Component}\n\t\t</div>\n\t);\n};\nconst ScrollWheelContext = createContext({\n\trotation: 0,\n\ttotal_items: 0,\n});\n\nconst useScrollController = () => {\n\tconst [rotation, setRotation] = useState(() => 0);\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() => {\n\t\tconst element = ref.current;\n\t\tif (!element) return;\n\n\t\tconst handleWheel = (e: WheelEvent) => {\n\t\t\t// 1. Prevent the browser from scrolling the page\n\t\t\te.preventDefault();\n\t\t\tconst innerHeight = window.innerHeight;\n\t\t\tconst delta_y = e.deltaY;\n\t\t\tconst tangent_distance = innerHeight / 2 / 2;\n\n\t\t\tconst delta_theta = Math.atan(delta_y / tangent_distance);\n\n\t\t\tsetRotation((prev) => prev + delta_theta);\n\t\t};\n\n\t\telement.addEventListener(\"wheel\", handleWheel, { passive: false });\n\n\t\treturn () => {\n\t\t\telement.removeEventListener(\"wheel\", handleWheel);\n\t\t};\n\t}, []);\n\n\treturn { rotation, ref };\n};\nconst ArcScrollWheel: React.FC<ScrollWheelProps> = ({ items }) => {\n\tconst containerStyle = getContainerStyle();\n\tconst helperLineStyle = getHelperLineStyle();\n\tconst total_items = items.length;\n\tconst { rotation, ref } = useScrollController();\n\n\treturn (\n\t\t<ScrollWheelContext\n\t\t\tvalue={{\n\t\t\t\trotation,\n\t\t\t\ttotal_items,\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={container_style}\n\t\t\t\tclassName=\"no-aos\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tstyle={containerStyle}\n\t\t\t\t\tref={ref}\n\t\t\t\t>\n\t\t\t\t\t{items.map((Comp, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WheelItem\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\tComponent={Comp}\n\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\n\t\t\t\t\t<div style={helperLineStyle} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</ScrollWheelContext>\n\t);\n};\nconst DemoWheelScroll = () => <ArcScrollWheel items={DemoComponents} />;\nexport { ArcScrollWheel, DemoWheelScroll };\nconst DemoContainer = () => {\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\theight: `calc(${CONFIG.radius + CONFIG.itemHeight}vh)`,\n\t\t\t\twidth: `calc(${CONFIG.radius / 2 + CONFIG.itemWidth / 2}vh)`,\n\t\t\t}}\n\t\t>\n\t\t\t<ArcScrollWheel items={DemoComponents} />\n\t\t</div>\n\t);\n};\nexport default DemoContainer;\n"],"names":["TestFC","_jsx","_Fragment","children","DemoComponents","container_style","height","concat","aspectRatio","WheelItem","_ref","Component","index","isActive","setIsActive","useState","rotation","useContext","ScrollWheelContext","theta","Math","asin","sqrt","CONFIG","items_per_half_turn","PI","total_turns","floor","current_angle","z_score","opacity_score","sin","marginLeft","style","marginTop","opacity","arguments","length","undefined","position","width","display","textAlign","justifyContent","alignItems","backgroundColor","color","getItemStyle","cos","onClick","createContext","total_items","ArcScrollWheel","_ref2","items","ref","useScrollController","setRotation","useRef","useEffect","element","current","handleWheel","e","preventDefault","innerHeight","window","delta_y","deltaY","tangent_distance","delta_theta","atan","prev","addEventListener","passive","removeEventListener","value","className","_jsxs","map","Comp","i","left","pointerEvents","DemoWheelScroll","DemoContainer"],"ignoreList":[],"sourceRoot":""}